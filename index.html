<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Stream Player TV</title>
  <link href="https://vjs.zencdn.net/8.3.0/video-js.css" rel="stylesheet" />
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      background: #000;
      font-family: sans-serif;
	  overflow-y: scroll !important; 
	  -webkit-overflow-scrolling: touch;
    }
	.scroll-wrapper {
	 height: 100vh;
  	 overflow-y: auto;
	}

    .video-js {
      width: 100%;
      height: 100vh;
    }
    /* Dropdown menu */
    #dropdown {
      position: absolute;
      top: 10px;
      left: 10px;
      z-index: 10;
    }
    #dropdown button {
      background: rgba(20,20,20,0.0);
      color: #fff;
	top: 50px;
      border: none;
      padding: 16px 24px;
      border-radius: 8px;
      cursor: pointer;
    }
    #menu {
      display: none;
      position: absolute;
      top: 40px;
      left: 0;
      background: rgba(20,20,20,0.8);
      border-radius: 6px;
      padding: 6px;
      max-height: auto;
	  width: max-content;
      overflow-y: scroll;   /* invece di auto */
	  -webkit-overflow-scrolling: touch; /* per browser basati su WebKit */
    }
	
    #menu button {
      display: flex;
      align-items: center;
      width: 100%;
      background: none;
      border: none;
      color: #fff;
      padding: 4px 6px;
      text-align: left;
      cursor: pointer;
    }
    #menu button:hover {
      background: rgba(255,255,255,0.1);
    }
    #menu img {
      width: 130px;
      margin-right: 12px;
    }
	
	#menu img[alt="Radio Montecarlo TV"] {
	height: 110px;
    width: auto;
    margin-right: 50px;
    margin-left: 35px;
	}
    .error {
      position: absolute;
      bottom: 10px;
      left: 10px;
      color: #ff6b6b;
      font-weight: 600;
      background: rgba(0,0,0,0.6);
      padding: 6px 10px;
      border-radius: 6px;
      display: none;
	}
   span {
 	  visibility: hidden;
	}
	/* Mostra sempre il pulsante Play prima dellâ€™avvio */
  .vjs-big-play-button {
    display: block !important;
    opacity: 1 !important;
    visibility: visible !important;
    z-index: 9999 !important;
}

/* Nasconde il pulsante dopo che il video Ã¨ partito */
.vjs-has-started .vjs-big-play-button {
    display: none !important;
}

/* Ingrandisce lâ€™icona Play */
.vjs-big-play-button .vjs-icon-placeholder:before {
    font-size: 3em !important;
}


  </style>
</head>
<body>
  <!-- Dropdown menu -->
  <div id="dropdown">
    <button onclick="toggleMenu()">ðŸ“º</button>
    <div id="menu" class="scroll-wrapper"></div>
  </div>

  <!-- Player Video.js fullscreen -->
  <!-- <video id="video" class="video-js vjs-default-skin" controls preload="auto" playsinline></video> -->
  <video id="video" class="video-js vjs-default-skin" 
    controls preload="auto" playsinline
    poster="https://upload.wikimedia.org/wikipedia/commons/3/3f/Play_button_icon.png">
  </video>


  <!-- Messaggi di errore -->
  <div id="errorBox" class="error">Errore nel caricamento dello stream.</div>

  <!-- JS Video.js + plugin DASH -->
  <script src="https://vjs.zencdn.net/8.3.0/video.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/videojs-contrib-dash@latest/dist/videojs-dash.min.js"></script>

  <script>
    const player = videojs('video');
    const errorBox = document.getElementById('errorBox');
    const menu = document.getElementById('menu');

    function toggleMenu() {
      menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
    }

    function loadStream(url) {
      errorBox.style.display = 'none';
      let type = "application/x-mpegURL"; // default HLS
      if (url.endsWith(".mpd")) type = "application/dash+xml"; // DASH
      	player.src(url);
		player.poster(""); 
		player.bigPlayButton.show();
		player.removeClass('vjs-has-started');

      player.ready(() => {
        player.play().catch(err => console.warn("Autoplay bloccato:", err));
      });
    }

    function showError(msg) {
      errorBox.textContent = msg;
      errorBox.style.display = 'block';
    }

    // Lista canali con logo + nome
    const channels = [
		// Canali Svizzera
		{name:"Radio Ticino", url:"https://2-fss-2.themediacdn.com/pl_124/amlst:204654-1927794/chunklist_b3500000.m3u8", logo:"https://radioticino.com/wp-content/uploads/2019/09/logob.png"},
		{name:"Radio 3i TV", url:"https://vstream-cdn.ch/hls/radio3i_1080p/index.m3u8", logo:"https://upload.wikimedia.org/wikipedia/commons/e/e5/Radio3i_wiki.png"},
		
		// Rai
		{name:"Rai 1", url:"http://mediapolis.rai.it/relinker/relinkerServlet.htm?cont=2606803&output=7&forceUserAgent=raiplayappletv", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/rai1.png"},
		{name:"Rai 2", url:"http://mediapolis.rai.it/relinker/relinkerServlet.htm?cont=308718&output=7&forceUserAgent=raiplayappletv", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/rai2.png"},
		{name:"Rai 3", url:"http://mediapolis.rai.it/relinker/relinkerServlet.htm?cont=308709&output=7&forceUserAgent=raiplayappletv", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/rai3.png"},
		{name:"Rai 4", url:"http://mediapolis.rai.it/relinker/relinkerServlet.htm?cont=746966&output=7&forceUserAgent=raiplayappletv", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/rai4.png"},
		{name:"Rai 5", url:"http://mediapolis.rai.it/relinker/relinkerServlet.htm?cont=395276&output=7&forceUserAgent=raiplayappletv", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/rai5.png"},
		{name:"Rai Movie", url:"http://mediapolis.rai.it/relinker/relinkerServlet.htm?cont=747002&output=7&forceUserAgent=raiplayappletv", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/raimovie.png"},
		{name:"Rai Premium", url:"http://mediapolis.rai.it/relinker/relinkerServlet.htm?cont=746992&output=7&forceUserAgent=raiplayappletv", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/raipremium.png"},
		{name:"Rai Gulp", url:"http://mediapolis.rai.it/relinker/relinkerServlet.htm?cont=746953&output=7&forceUserAgent=raiplayappletv", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/raigulp.png"},
		{name:"Rai Yoyo", url:"http://mediapolis.rai.it/relinker/relinkerServlet.htm?cont=746899&output=7&forceUserAgent=raiplayappletv", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/raiyoyo.png"},
		{name:"Rai News 24", url:"http://mediapolis.rai.it/relinker/relinkerServlet.htm?cont=1&output=7&forceUserAgent=raiplayappletv", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/rainews24.png"},
		{name:"Rai Storia", url:"http://mediapolis.rai.it/relinker/relinkerServlet.htm?cont=746990&output=7&forceUserAgent=raiplayappletv", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/raistoria.png"},
		{name:"Rai Scuola", url:"http://mediapolis.rai.it/relinker/relinkerServlet.htm?cont=747011&output=7&forceUserAgent=raiplayappletv", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/raiscuola.png"},
		{name:"Rai Sport + HD", url:"http://mediapolis.rai.it/relinker/relinkerServlet.htm?cont=358025&output=7&forceUserAgent=raiplayappletv", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/raisport+hd.png"},	// Mediaset
		
		// Mediaset
		{name:"Rete 4", url:"https://live03-col.msf.cdn.mediaset.net/live/ch-r4/r4-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/rete4.png"},
		{name:"Canale 5", url:"https://live03-col.msf.cdn.mediaset.net/live/ch-c5/c5-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/canale5.png"},
		{name:"Italia 1", url:"https://live03-col.msf.cdn.mediaset.net/live/ch-i1/i1-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/italia1.png"},
		{name:"20 Mediaset", url:"https://live03-col.msf.cdn.mediaset.net/live/ch-lb/lb-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/20mediaset.png"},
		{name:"Iris", url:"https://live03-col.msf.cdn.mediaset.net/live/ch-ki/ki-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/iris.png"},
		{name:"Twenty Seven", url:"https://live03-col.msf.cdn.mediaset.net/live/ch-ts/ts-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/twentyseven.png"},
		{name:"La 5", url:"https://live03-col.msf.cdn.mediaset.net/live/ch-ka/ka-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/la5.png"},
		{name:"Cine34", url:"https://live03-col.msf.cdn.mediaset.net/live/ch-b6/b6-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/cine34.png"},
		{name:"Focus", url:"https://live03-col.msf.cdn.mediaset.net/live/ch-fu/fu-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/focus.png"},
		{name:"Top Crime", url:"https://live03-col.msf.cdn.mediaset.net/live/ch-lt/lt-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/topcrime.png"},
		{name:"Boing", url:"https://live03-col.msf.cdn.mediaset.net/live/ch-kb/kb-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/boing.png"},
		{name:"Cartoonito", url:"https://live03-col.msf.cdn.mediaset.net/live/ch-la/la-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/cartoonito.png"},
		{name:"Italia 2", url:"https://live03-col.msf.cdn.mediaset.net/live/ch-i2/i2-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/italia2.png"},
		{name:"TGCOM 24", url:"https://live03-col.msf.cdn.mediaset.net/live/ch-kf/kf-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/tgcom24.png"},
		{name:"Mediaset Extra", url:"https://live03-col.msf.cdn.mediaset.net/live/ch-kq/kq-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/mediasetextra.png"},
		{name:"Radio 105 TV", url:"https://live03-col.msr.cdn.mediaset.net/live/ch-ec/ec-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/radio105tv.png"},
		{name:"R101 TV", url:"https://live03-col.msr.cdn.mediaset.net/live/ch-er/er-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/r101tv.png"},
		{name:"Virgin Radio TV", url:"https://live03-col.msr.cdn.mediaset.net/live/ch-ew/ew-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/virginradiotv.png"},
		{name:"Radio Montecarlo TV", url:"https://live03-col.msr.cdn.mediaset.net/live/ch-bb/bb-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/radiomontecarlotv.png"}
	];

    // Popola il menu
    channels.forEach((ch,i) => {
      const btn = document.createElement("button");
      btn.onclick = () => { loadStream(ch.url); toggleMenu(); };
      const img = document.createElement("img");
      img.src = ch.logo;
      img.alt = ch.name;
      btn.appendChild(img);
      const label = document.createElement("span");
	  name.className = "name";
      label.textContent = ch.name;
      btn.appendChild(label);
      menu.appendChild(btn);
      if (i===0) loadStream(ch.url); // carica il primo canale
    });

    // Gestione errori Video.js
    player.on('error', () => {
      const err = player.error();
      if (err) showError("Errore Video.js: " + err.message);
    });
  </script>
</body>
</html>

