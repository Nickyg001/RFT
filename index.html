<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Player IPTV HLS + DASH</title>
  <link href="https://vjs.zencdn.net/8.3.0/video-js.css" rel="stylesheet" />
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      background: #000;
      font-family: sans-serif;
    }
    .video-js {
      width: 100%;
      height: 100vh;
    }
    /* Dropdown menu */
    #dropdown {
      position: absolute;
      top: 10px;
      left: 10px;
      z-index: 10;
    }
    #dropdown button {
      background: rgba(20,20,20,0.8);
      color: #fff;
      border: none;
      padding: 8px 12px;
      border-radius: 6px;
      cursor: pointer;
    }
    #menu {
      display: none;
      position: absolute;
      top: 40px;
      left: 0;
      background: rgba(20,20,20,0.9);
      border-radius: 6px;
      padding: 6px;
      max-height: 90vh;
	  width: max-content;
      overflow-y: auto;
    }
    #menu button {
      display: flex;
      align-items: center;
      width: 100%;
      background: none;
      border: none;
      color: #fff;
      padding: 4px 6px;
      text-align: left;
      cursor: pointer;
    }
    #menu button:hover {
      background: rgba(255,255,255,0.1);
    }
    #menu img {
      width: 100px;
      margin-right: 12px;
    }
	
	#menu img[alt="Radio Montecarlo TV"] {
	height: 80px;
    width: auto;
    margin-right: 25px;
    margin-left: 14px;
	}
    .error {
      position: absolute;
      bottom: 10px;
      left: 10px;
      color: #ff6b6b;
      font-weight: 600;
      background: rgba(0,0,0,0.6);
      padding: 6px 10px;
      border-radius: 6px;
      display: none;
    }
  </style>
</head>
<body>
  <!-- Dropdown menu -->
  <div id="dropdown">
    <button onclick="toggleMenu()">ðŸ“º Canali</button>
    <div id="menu"></div>
  </div>

  <!-- Player Video.js fullscreen -->
  <video id="video" class="video-js vjs-default-skin" controls preload="auto" playsinline></video>

  <!-- Messaggi di errore -->
  <div id="errorBox" class="error">Errore nel caricamento dello stream.</div>

  <!-- JS Video.js + plugin DASH -->
  <script src="https://vjs.zencdn.net/8.3.0/video.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/videojs-contrib-dash@latest/dist/videojs-dash.min.js"></script>

  <script>
    const player = videojs('video');
    const errorBox = document.getElementById('errorBox');
    const menu = document.getElementById('menu');

    function toggleMenu() {
      menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
    }

    function loadStream(url) {
      errorBox.style.display = 'none';
      let type = "application/x-mpegURL"; // default HLS
      if (url.endsWith(".mpd")) type = "application/dash+xml"; // DASH
      player.src({ src: url, type: type });
      player.ready(() => {
        player.play().catch(err => console.warn("Autoplay bloccato:", err));
      });
    }

    function showError(msg) {
      errorBox.textContent = msg;
      errorBox.style.display = 'block';
    }

    // Lista canali con logo + nome
    const channels = [
		// Canali Svizzera
		{name:"Radio Ticino", url:"https://2-fss-2.themediacdn.com/pl_124/amlst:204654-1927794/chunklist_b3500000.m3u8", logo:"https://radioticino.com/wp-content/uploads/2019/09/logob.png"},
		{name:"Radio 3i TV", url:"https://vstream-cdn.ch/hls/radio3i_1080p/index.m3u8", logo:"https://upload.wikimedia.org/wikipedia/commons/e/e5/Radio3i_wiki.png"},
		
		// Rai
		{name:"Rai 1", url:"http://mediapolis.rai.it/relinker/relinkerServlet.htm?cont=2606803&output=7&forceUserAgent=raiplayappletv", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/rai1.png"},
		{name:"Rai 2", url:"http://mediapolis.rai.it/relinker/relinkerServlet.htm?cont=308718&output=7&forceUserAgent=raiplayappletv", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/rai2.png"},
		{name:"Rai 3", url:"http://mediapolis.rai.it/relinker/relinkerServlet.htm?cont=308709&output=7&forceUserAgent=raiplayappletv", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/rai3.png"},
		{name:"Rai 4", url:"http://mediapolis.rai.it/relinker/relinkerServlet.htm?cont=746966&output=7&forceUserAgent=raiplayappletv", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/rai4.png"},
		{name:"Rai 5", url:"http://mediapolis.rai.it/relinker/relinkerServlet.htm?cont=395276&output=7&forceUserAgent=raiplayappletv", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/rai5.png"},
		{name:"Rai Movie", url:"http://mediapolis.rai.it/relinker/relinkerServlet.htm?cont=747002&output=7&forceUserAgent=raiplayappletv", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/raimovie.png"},
		{name:"Rai Premium", url:"http://mediapolis.rai.it/relinker/relinkerServlet.htm?cont=746992&output=7&forceUserAgent=raiplayappletv", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/raipremium.png"},
		{name:"Rai Gulp", url:"http://mediapolis.rai.it/relinker/relinkerServlet.htm?cont=746953&output=7&forceUserAgent=raiplayappletv", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/raigulp.png"},
		{name:"Rai Yoyo", url:"http://mediapolis.rai.it/relinker/relinkerServlet.htm?cont=746899&output=7&forceUserAgent=raiplayappletv", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/raiyoyo.png"},
		{name:"Rai News 24", url:"http://mediapolis.rai.it/relinker/relinkerServlet.htm?cont=1&output=7&forceUserAgent=raiplayappletv", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/rainews24.png"},
		{name:"Rai Storia", url:"http://mediapolis.rai.it/relinker/relinkerServlet.htm?cont=746990&output=7&forceUserAgent=raiplayappletv", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/raistoria.png"},
		{name:"Rai Scuola", url:"http://mediapolis.rai.it/relinker/relinkerServlet.htm?cont=747011&output=7&forceUserAgent=raiplayappletv", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/raiscuola.png"},
		{name:"Rai Sport + HD", url:"http://mediapolis.rai.it/relinker/relinkerServlet.htm?cont=358025&output=7&forceUserAgent=raiplayappletv", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/raisport+hd.png"},	// Mediaset
		
		// Mediaset
		{name:"Rete 4", url:"https://live03-col.msf.cdn.mediaset.net/live/ch-r4/r4-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/rete4.png"},
		{name:"Canale 5", url:"https://live03-col.msf.cdn.mediaset.net/live/ch-c5/c5-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/canale5.png"},
		{name:"Italia 1", url:"https://live03-col.msf.cdn.mediaset.net/live/ch-i1/i1-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/italia1.png"},
		{name:"20 Mediaset", url:"https://live03-col.msf.cdn.mediaset.net/live/ch-lb/lb-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/20mediaset.png"},
		{name:"Iris", url:"https://live03-col.msf.cdn.mediaset.net/live/ch-ki/ki-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/iris.png"},
		{name:"Twenty Seven", url:"https://live03-col.msf.cdn.mediaset.net/live/ch-ts/ts-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/twentyseven.png"},
		{name:"La 5", url:"https://live03-col.msf.cdn.mediaset.net/live/ch-ka/ka-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/la5.png"},
		{name:"Cine34", url:"https://live03-col.msf.cdn.mediaset.net/live/ch-b6/b6-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/cine34.png"},
		{name:"Focus", url:"https://live03-col.msf.cdn.mediaset.net/live/ch-fu/fu-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/focus.png"},
		{name:"Top Crime", url:"https://live03-col.msf.cdn.mediaset.net/live/ch-lt/lt-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/topcrime.png"},
		{name:"Boing", url:"https://live03-col.msf.cdn.mediaset.net/live/ch-kb/kb-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/boing.png"},
		{name:"Cartoonito", url:"https://live03-col.msf.cdn.mediaset.net/live/ch-la/la-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/cartoonito.png"},
		{name:"Italia 2", url:"https://live03-col.msf.cdn.mediaset.net/live/ch-i2/i2-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/italia2.png"},
		{name:"TGCOM 24", url:"https://live03-col.msf.cdn.mediaset.net/live/ch-kf/kf-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/tgcom24.png"},
		{name:"Mediaset Extra", url:"https://live03-col.msf.cdn.mediaset.net/live/ch-kq/kq-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/mediasetextra.png"},
		{name:"Radio 105 TV", url:"https://live03-col.msr.cdn.mediaset.net/live/ch-ec/ec-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/radio105tv.png"},
		{name:"R101 TV", url:"https://live03-col.msr.cdn.mediaset.net/live/ch-er/er-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/r101tv.png"},
		{name:"Virgin Radio TV", url:"https://live03-col.msr.cdn.mediaset.net/live/ch-ew/ew-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/virginradiotv.png"},
		{name:"Radio Montecarlo TV", url:"https://live03-col.msr.cdn.mediaset.net/live/ch-bb/bb-clr.isml/manifest.mpd", logo:"https://cdn.jsdelivr.net/gh/Tundrak/IPTV-Italia@master/logos/radiomontecarlotv.png"}
	];

    // Popola il menu
    channels.forEach((ch,i) => {
      const btn = document.createElement("button");
      btn.onclick = () => { loadStream(ch.url); toggleMenu(); };
      const img = document.createElement("img");
      img.src = ch.logo;
      img.alt = ch.name;
      btn.appendChild(img);
      const label = document.createElement("span");
      label.textContent = ch.name;
      btn.appendChild(label);
      menu.appendChild(btn);
      if (i===0) loadStream(ch.url); // carica il primo canale
    });

    // Gestione errori Video.js
    player.on('error', () => {
      const err = player.error();
      if (err) showError("Errore Video.js: " + err.message);
    });
  </script>
</body>
</html>

